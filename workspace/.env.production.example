# TrueTrack Production Environment Configuration
# Copy this file to .env.production and update values

# =======================
# Application Settings
# =======================
APP_NAME=TrueTrack
APP_ENV=production
APP_KEY=base64:GENERATE_WITH_php_artisan_key:generate
APP_DEBUG=false
APP_URL=http://localhost:8080

# Timezone
APP_TIMEZONE=UTC
APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

# =======================
# Production Database
# =======================
DB_CONNECTION=pgsql
DB_HOST=pgsql-prod
DB_PORT=5432
DB_DATABASE=truetrack_prod
DB_USERNAME=sail
DB_PASSWORD=CHANGE_THIS_IN_PRODUCTION

# Port mapping (external access)
PROD_DB_PORT=5433

# =======================
# Redis Cache & Queue
# =======================
REDIS_CLIENT=phpredis
REDIS_HOST=redis-prod
REDIS_PASSWORD=null
REDIS_PORT=6379

# Port mapping (external access)
PROD_REDIS_PORT=6380

# =======================
# Session & Cache
# =======================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

CACHE_STORE=redis
CACHE_PREFIX=truetrack_cache

# =======================
# Queue Configuration
# =======================
QUEUE_CONNECTION=redis
QUEUE_FAILED_DRIVER=database

# =======================
# Broadcasting
# =======================
BROADCAST_CONNECTION=log

# =======================
# Filesystem
# =======================
FILESYSTEM_DISK=local

# =======================
# Logging
# =======================
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning

# =======================
# Mail Configuration
# =======================
MAIL_MAILER=smtp
MAIL_SCHEME=null
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@truetrack.app"
MAIL_FROM_NAME="${APP_NAME}"

# =======================
# AWS (for S3 storage if needed)
# =======================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# =======================
# Security
# =======================
BCRYPT_ROUNDS=12

# =======================
# Application Ports
# =======================
PROD_APP_PORT=8080
WWWUSER=1000
WWWGROUP=1000

# =======================
# TrueTrack Specific Settings
# =======================
# OFX Import
OFX_IMPORT_RETENTION_DAYS=90
MAX_CONCURRENT_IMPORTS_PER_USER=5

# XLSX Import
XLSX_IMPORT_RETENTION_DAYS=90
MAX_XLSX_ROWS_PER_IMPORT=5000
XLSX_DUPLICATE_DETECTION=row_level
XLSX_TRANSACTION_HASH_RETENTION_DAYS=365

# Fuzzy Matching
LEVENSHTEIN_DISTANCE_THRESHOLD_PERCENT=20

# =======================
# Performance Tuning
# =======================
# PHP
PHP_MEMORY_LIMIT=512M
PHP_MAX_EXECUTION_TIME=300
PHP_UPLOAD_MAX_FILESIZE=20M
PHP_POST_MAX_SIZE=20M

# OPcache (enabled in Dockerfile.production)
OPCACHE_ENABLE=1
OPCACHE_MEMORY_CONSUMPTION=256
OPCACHE_MAX_ACCELERATED_FILES=10000
